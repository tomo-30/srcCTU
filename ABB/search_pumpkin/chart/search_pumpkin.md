# 全体フロー

```mermaid
flowchart TD
    A["開始 / 農園の端で待機"]
    B["走行 / うね沿いに往復移動"]
    C["粗スキャン / ピンアートセンサで一定ピッチ押し付け"]
    D{"閾値以上の高さ点群があるか?"}
    E["精密スキャン / 局所で高密ピッチに切替"]
    F{"カボチャ候補を検出したか?"}
    G["収穫処理へ移行"]
    H["収納ストレージへ格納 / タグ付け"]
    I["マップ更新 / スキャン結果を反映"]
    J{"未探索エリアが残っているか?"}
    K["終了 / 全カボチャ収穫完了"]

    %% メインフロー
    A --> B
    B --> C
    C --> D
    D -- "いいえ" --> I
    D -- "はい" --> E
    E --> F
    F -- "いいえ" --> I
    F -- "はい" --> G
    G --> H
    H --> I
    I --> J
    J -- "残っている" --> B
    J -- "全て探索済み" --> K
